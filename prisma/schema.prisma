datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id            String      @default(uuid()) @id
  ip            String?
  createdAt     DateTime    @default(now())
  updatedAt     DateTime    @updatedAt
  account       String      @unique
  email         String?     @unique
  twitter       Twitter?
  discord       String?     @unique
  ens           String?     @unique
  role          Role        @default(PLAYER)
  active        Boolean     @default(true)
  ipinfo        IpInfo?
  clientInfo    String?
  verifyHash    String?
  verifySalt    String?
}

model IpInfo {
  id            String      @default(uuid()) @id
  user          User        @relation(fields: [userId], references: [id])
  userId        String      @unique
  ip            String?
  hostname      String?
  country       String?
  city          String?
  region        String?
  loc           String?
  org           String?
  postal        String?
  timezone      String?
  userAgent     String?
}

model Twitter {
  id                  String      @default(uuid()) @id
  user                User        @relation(fields: [userId], references: [id])
  userId              String      @unique
  profileImageUrl     String?
  name                String?     @unique
  twitterId           String?     @unique
  username            String?     @unique
  followersCount      Int?
  followingCount      Int?
  tweetCount          Int?
  location            String?
  twitterCreatedAt    DateTime?
}

enum Role {
  PLAYER
  ADMIN
  ROOT
}
